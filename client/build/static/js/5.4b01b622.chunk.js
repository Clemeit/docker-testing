(this.webpackJsonpddo_audit=this.webpackJsonpddo_audit||[]).push([[5],{478:function(e,t,n){"use strict";n(0);var a=n(76),r=n(1);t.a=function(e){return Object(r.jsx)("div",{className:"show-on-mobile",style:{display:"flex",flexDirection:"row",justifyContent:"center",width:"100%"},children:Object(r.jsxs)("p",{style:{fontSize:"1.5rem",lineHeight:"normal",color:"var(--text-faded)",textAlign:"center"},children:[Object(r.jsx)(a.a,{style:{verticalAlign:"top"}}),"This page is not optimized for mobile browsing."]})})}},507:function(e,t,n){"use strict";n.r(t);var a=n(4),r=n(0),i=n.n(r),s=n(33),c=n(36),o=n(76),l=n(141),d=n(100),u=n(101),h=n(45),j=n(44),b=n(13),m=n(19),f=n(11),g=n(12),p=n(220),x=n(22),O=n.n(x),v=n(31),y=n(1),S=function(e){var t=i.a.useState(!1),n=Object(a.a)(t,2),r=n[0],s=n[1],c=i.a.useState(""),o=Object(a.a)(c,2),l=o[0],d=o[1],u=i.a.useState(""),j=Object(a.a)(u,2),b=j[0],m=j[1],x=i.a.useState(!1),S=Object(a.a)(x,2),k=S[0],w=S[1],N=i.a.useState(""),C=Object(a.a)(N,2),A=C[0],I=C[1],E=i.a.useState("Argonnessen"),D=Object(a.a)(E,2),z=D[0],L=D[1];function R(){if(!k){if(!A||!z)return d("Invalid input"),m("Please enter a name and server."),void s(!0);if(!/^[a-zA-Z0-9\-]+$/.test(A)||0===A.length||A.length>20)return d("Invalid input"),m("Please enter a valid name and server."),void s(!0);w(!0),Object(g.b)("https://api.ddoaudit.com/players/lookup",{name:A.trim(),server:z},1e4).then((function(t){t.playerid?(Object(f.a)("Registered character","".concat(A.trim(),", ").concat(z)),e.submit(t.playerid,z)):"Anonymous"===t.error?(Object(f.a)("Character registration failed","Anonymous: ".concat(A.trim(),", ").concat(z)),d("Character is anonymous"),m("That character is anonymous. Turn off anonymous for at least 1 minute and then try again."),s(!0)):(Object(f.a)("Character registration failed","Not found: ".concat(A.trim(),", ").concat(z)),d("Character not found or is anonymous"),m("Check that the name and server are correct, and ensure that the character is not marked as anonymous."),s(!0))})).catch((function(){Object(f.a)("Character registration failed","Timeout"),d("Failed to fetch character data"),m("The server took too long to respond. Please try again later."),s(!0)})).finally((function(){return w(!1)}))}}return i.a.useEffect((function(){return document.getElementById("name-input").focus(),e.lastServer&&L(e.lastServer),O()(document).on("keydown.handleEscape",(function(t){"Escape"===t.key&&e.close()})),function(){return O()(document).unbind("keydown.handleEscape")}}),[]),Object(y.jsxs)("div",{className:"absolute-center",children:[Object(y.jsx)("div",{className:"overlay",onClick:function(){return e.close()}}),Object(y.jsxs)("div",{className:"popup-message fullscreen",children:[Object(y.jsx)(h.a,{className:"link-icon should-invert",style:{position:"absolute",top:"5px",right:"5px",cursor:"pointer"},onClick:function(){return e.close()}}),Object(y.jsx)("h2",{children:"Add Character"}),r&&Object(y.jsx)(p.a,{type:"error",title:l,message:b,fontSize:1.1}),e.characterExists&&!r&&Object(y.jsx)(p.a,{type:"warning",title:"Duplicate entry",message:"This character is already registered.",fontSize:1.1}),Object(y.jsxs)("label",{style:{fontSize:"1.2rem",color:"var(--text-faded)",display:"flex",flexDirection:"column"},children:["Name",Object(y.jsx)("input",{id:"name-input",disabled:k,value:A,onChange:function(e){I(e.target.value),s(!1)},onKeyDown:function(e){"Enter"===e.key&&document.getElementById("server-select-field").focus()}})]}),Object(y.jsxs)("label",{style:{fontSize:"1.2rem",color:"var(--text-faded)",display:"flex",flexDirection:"column"},children:["Server",Object(y.jsx)("select",{id:"server-select-field",disabled:k,style:{fontSize:"1.3rem",padding:"5px 1px"},value:z,onChange:function(e){L(e.target.value),s(!1)},onKeyDown:function(e){"Enter"===e.key&&R()},children:v.a.map((function(e){return Object(y.jsx)("option",{value:e,children:e},e)}))})]}),Object(y.jsx)("div",{className:"primary-button should-invert".concat(k?" disabled":""),style:{marginLeft:"auto",minWidth:"100px",textAlign:"center",marginTop:"10px"},onClick:function(){return R()},children:k?"Searching...":"Add"})]})]})},k=n(222),w=n(221),N=n(16),C=function(e){var t=i.a.useState(null),n=Object(a.a)(t,2),r=n[0],s=n[1],c=i.a.useState([]),o=Object(a.a)(c,2),l=o[0],d=o[1],u=i.a.useState(!1),h=Object(a.a)(u,2),j=h[0],b=h[1],f=i.a.useState("Argonnessen"),x=Object(a.a)(f,2),v=x[0],C=x[1],A=i.a.useState(!1),I=Object(a.a)(A,2),E=I[0],D=I[1],z=i.a.useState(!0),L=Object(a.a)(z,2),R=L[0],T=L[1],F=i.a.useState(!1),P=Object(a.a)(F,2),B=P[0],H=P[1],J=i.a.useState(!1),M=Object(a.a)(J,2),W=M[0],_=M[1];i.a.useEffect((function(){var e=JSON.parse(localStorage.getItem("registered-characters")||"[]");e.length&&s(e)}),[]);var G=i.a.useRef(null);function K(){T(!0),localStorage.setItem("registered-characters",JSON.stringify(r)),Object(g.b)("https://api.ddoaudit.com/players/lookup",{playerids:r},1e4).then((function(e){if(e.error)d([]);else{var t=[];null!=r&&r.forEach((function(n){var a;t.push(null===(a=e.filter((function(e){return e.PlayerId===n})))||void 0===a?void 0:a[0])})),d(t)}})).catch((function(){return _(!0)})).finally((function(){T(!1),H(!1)}))}function V(e){var t,n=[];return null===e||void 0===e||null===(t=e.Classes)||void 0===t||t.forEach((function(e){null!=e.Name&&"Epic"!=e.Name&&"Legendary"!=e.Name&&n.push("".concat(e.Name," ").concat(e.Level))})),n.join(", ")}function Y(e){return e?e.Anonymous?"blue":e.Online?"green":"red":"blue"}function Z(){return null!=r&&r.length>=15}return i.a.useEffect((function(){r?r.length?(T(!0),K()):(localStorage.setItem("registered-characters","[]"),d([]),T(!1),H(!1)):(T(!1),H(!1))}),[r]),Object(y.jsxs)("div",{children:[W&&Object(y.jsx)(p.a,{type:"error",title:"Failed to fetch character data",message:Object(y.jsxs)(y.Fragment,{children:["Please try again later. If the error persists, try clearing your browser cookies or let me know of the problem via the"," ",Object(y.jsx)(N.a,{to:"/suggestions",children:"Suggestions page"}),"."]}),submessage:"Reason: the server took too long to respond",fontSize:1.3,pushBottom:!0}),j&&Object(y.jsx)(S,{lastServer:v,submit:function(e,t){!function(e){H(!0),null!=r&&r.includes(e)?D(!0):(D(!1),s((function(t){return[].concat(Object(m.a)(t||[]),[e])})),b(!1))}(e),C(t)},close:function(){return b(!1)},characterExists:E}),Object(y.jsxs)("div",{children:[l&&l.length>0&&l.map((function(e,t){var n;return Object(y.jsxs)("div",{children:[e&&Object(y.jsxs)("div",{style:{padding:"10px 0px"},children:[Object(y.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",marginBottom:"15px"},children:[Object(y.jsx)("div",{style:{backgroundColor:Y(e),width:"13px",height:"13px",borderRadius:"100%",marginRight:"7px"}}),Object(y.jsx)("h4",{style:{marginBottom:"0px",marginRight:"10px"},children:e.Name}),Object(y.jsx)(k.a,{className:"nav-icon should-invert",style:{cursor:"pointer"},onClick:function(){return e=t,H(!0),void s((function(t){return t.filter((function(t,n){return n!=e}))}));var e}}),Object(y.jsx)(w.a,{className:"nav-icon should-invert character-refresh-button",style:{cursor:"pointer"},onClick:function(){K(),G.current+=360,O()(".character-refresh-button").css({transform:"rotate(".concat(G.current,"deg)")})}})]}),Object(y.jsxs)("table",{className:"character-table",style:{width:"100%"},children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{style:{color:"var(--text-faded)",fontWeight:"bold",fontSize:"1.2rem",lineHeight:"15px"},children:[Object(y.jsx)("th",{style:{width:"10%"},children:"Server"}),Object(y.jsx)("th",{style:{width:"10%"},children:"Level"}),Object(y.jsx)("th",{style:{width:"20%"},children:"Guild"}),Object(y.jsx)("th",{style:{width:"30%"},children:"Classes"}),Object(y.jsx)("th",{style:{width:"30%"},children:"Location"})]})}),Object(y.jsx)("tbody",{children:Object(y.jsxs)("tr",{style:{fontSize:"1.4rem"},children:[Object(y.jsx)("td",{style:{verticalAlign:"top"},children:e.Server}),Object(y.jsx)("td",{style:{verticalAlign:"top"},children:e.TotalLevel}),Object(y.jsx)("td",{style:{verticalAlign:"top"},children:e.Guild}),Object(y.jsx)("td",{style:{verticalAlign:"top"},children:V(e)}),Object(y.jsx)("td",{style:{verticalAlign:"top"},children:(null===(n=e.Location)||void 0===n?void 0:n.Name)||"Somewhere in the Aether"})]})})]})]}),Object(y.jsx)("hr",{style:{backgroundColor:"var(--text)",opacity:.2,margin:"5px 3px"}}),t==l.length-1&&Object(y.jsx)("div",{style:{height:"20px"}})]},t)})),R&&(!(l&&l.length>0)||B)&&Object(y.jsx)("div",{style:{minHeight:"150px",height:"100%",width:"100%",display:"flex",justifyContent:"center",alignItems:"center"},children:Object(y.jsx)("span",{style:{textAlign:"center",fontSize:"1.5rem"},children:"Loading..."})})]}),Object(y.jsxs)("div",{children:[!Z()&&Object(y.jsx)("div",{className:"primary-button should-invert",onClick:function(){b(!0),D(!1)},children:"Add Character"}),Z()&&Object(y.jsxs)("span",{style:{fontSize:"1.3rem",color:"var(--text-faded)"},children:["Character limit reached. You may have up to ",15," ","registered characters."]})]})]})},A=n(478);t.default=function(){var e=i.a.useState(!1),t=Object(a.a)(e,2),n=t[0],r=t[1],m=i.a.useState(!1),g=Object(a.a)(m,2),p=g[0],x=g[1],O=i.a.useState(!1),v=Object(a.a)(O,2),S=v[0],k=v[1],w=i.a.useState(null),I=Object(a.a)(w,2),E=I[0],D=I[1];function z(e){null!=e?(Object(f.b)("Feature: Character Registration",e),D("Like"===e?"positive":"negative")):(D("close"),x(!1)),k(!0),localStorage.setItem("feature-vote-character-registration",new Date)}return i.a.useEffect((function(){localStorage.getItem("hide-character-registration-disclaimer")?r(!1):r(!0);var e=localStorage.getItem("feature-vote-character-registration");JSON.parse(localStorage.getItem("registered-characters")||"[]").length>0&&null==e&&x(!0)}),[]),Object(y.jsxs)("div",{children:[Object(y.jsxs)(s.a,{children:[Object(y.jsx)("title",{children:"DDO Audit Character Registration"}),Object(y.jsx)("meta",{name:"description",content:"Register a list of your characters for automatic LFM filtering and raid timer tracking."}),Object(y.jsx)("meta",{property:"og:image",content:"/icons/grouping-512px.png"}),Object(y.jsx)("meta",{property:"og:site_name",content:"DDO Audit"}),Object(y.jsx)("meta",{property:"twitter:image",content:"/icons/grouping-512px.png"})]}),Object(y.jsx)(c.a,{small:!0,showTitle:!0,showSubtitle:!0,showButtons:!1,hideOnMobile:!0,hideVote:!0,title:"Characters",subtitle:"Character Registration"}),Object(y.jsxs)("div",{className:"content-container",children:[Object(y.jsx)(j.a,{page:"registration"}),Object(y.jsx)("div",{className:"top-content-padding shrink-on-mobile"}),Object(y.jsx)(A.a,{}),Object(y.jsxs)(b.a,{title:"Characters",description:"Register your characters and we'll automatically keep track of your raid timers and filter the LFM panel based on your characters' current levels.",children:[Object(y.jsx)(C,{}),p&&Object(y.jsx)("div",{className:"feature-vote-container",style:{opacity:S?1:""},children:S?Object(y.jsx)(y.Fragment,{children:Object(y.jsx)("span",{style:{cursor:"default"},children:"positive"===E?"That's great to hear! Thanks.":Object(y.jsxs)(y.Fragment,{children:["Have a moment to"," ",Object(y.jsx)(N.a,{to:"/suggestions",children:"suggest an improvement"}),"?"]})})}):Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("span",{style:{cursor:"default"},children:"Is this feature easy to use?"}),Object(y.jsx)(u.a,{className:"nav-icon should-invert",style:{cursor:"pointer"},onClick:function(){return z("Like")}}),Object(y.jsx)(d.a,{className:"nav-icon should-invert",style:{cursor:"pointer"},onClick:function(){return z("Dislike")}}),Object(y.jsx)(h.a,{className:"nav-icon should-invert",style:{cursor:"pointer"},onClick:function(){return z(null)}})]})})]}),n&&Object(y.jsx)(b.a,{title:Object(y.jsxs)("div",{style:{display:"flex",justifyContent:"center",lineHeight:"30px"},children:[Object(y.jsx)(o.a,{style:{width:"30px",height:"30px",marginRight:"10px"}}),"Please Note"]}),altTitle:"Please Note",noLink:!0,description:Object(y.jsxs)("span",{children:[Object(y.jsx)("p",{children:"Anonymous characters must turn off 'Anonymous' for at least 1 minute before being registered, but may return to being anonymous afterwards. Characters marked as anonymous will not show online/offline status and will have their guild name and location redacted."}),Object(y.jsxs)("p",{children:[Object(y.jsx)("span",{className:"lfm-number",children:"We will never ask for your username, password, or personal data."})," ","Please do not share this type of information with us."]})]}),noFade:!0,children:Object(y.jsx)("div",{className:"secondary-button should-invert",onClick:function(){r(!1),localStorage.setItem("hide-character-registration-disclaimer",!0),Object(f.a)("Dismissed disclaimer","Character registration")},children:"Dismiss"})}),Object(y.jsx)(b.a,{title:"See Also...",children:Object(y.jsx)("div",{className:"content-cluster-options",children:Object(y.jsxs)(N.a,{to:"/timers",className:"nav-box shrinkable",style:{height:"auto",minHeight:"150px"},children:[Object(y.jsxs)("div",{className:"nav-box-title",children:[Object(y.jsx)(l.a,{className:"nav-icon should-invert"}),Object(y.jsx)("h2",{className:"content-option-title",children:"Raid Timers"})]}),Object(y.jsx)("p",{className:"content-option-description",children:"View and manage your current raid timers."})]})})})]})]})}}}]);
//# sourceMappingURL=5.4b01b622.chunk.js.map