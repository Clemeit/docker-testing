(this.webpackJsonpddo_audit=this.webpackJsonpddo_audit||[]).push([[15],{500:function(t,e,n){"use strict";n.r(e);var i=n(4),r=n(0),a=n.n(r),c=n(36),o=n(13),s=n(61),l=n(12),u=n(1);e.default=function(t){var e=a.a.useState([]),n=Object(i.a)(e,2),r=n[0],d=n[1],h=a.a.useState(24),p=Object(i.a)(h,2),x=p[0],g=p[1],j=a.a.useRef(x);j.current=x;var m=a.a.useState(null),f=Object(i.a)(m,2),y=f[0],b=f[1],v=a.a.useState(0),O=Object(i.a)(v,2),S=O[0],w=O[1];function T(t){return"".concat(t.getUTCFullYear(),"-").concat((t.getUTCMonth()+1).toString().padStart(2,"0"),"-").concat(t.getUTCDate().toString().padStart(2,"0"),"T").concat(t.getUTCHours().toString().padStart(2,"0"),":").concat(t.getUTCMinutes().toString().padStart(2,"0"),":").concat(t.getUTCSeconds().toString().padStart(2,"0"),".000Z")}function D(t,e,n){for(var i,r=0,a=0,c=e.getTime(),o=0;o<t.length;o++)i=new Date(t[o].datetime).getTime(),Math.abs(c-i)<=1e3*n&&r++,Math.abs(c-i)<=500*n&&(a=Math.max(a,t[o].intensity));return{count:r,intensity:a}}function M(){Object(l.b)("https://api.ddoaudit.com/iot/steps",{hours:j.current},5e3).then((function(t){!function(t){for(var e=[],n=[],i=new Date(t[0].datetime);i.getTime()<new Date(t[t.length-1].datetime).getTime();){var r=D(t,i,240),a=r.count,c=r.intensity;e.push({x:T(i),y:a}),n.push({x:T(i),y:c}),i=new Date(i.getTime()+24e4)}b({frequency:[{id:"Steps",color:"hsl(200, 100%, 50%)",data:e}],intensity:[{id:"Intensity",color:"hsl(30, 100%, 50%)",data:n}]})}(t),d(t)})).catch((function(t){}))}return a.a.useEffect((function(){M(),w((new Date).getTime());var t=setInterval((function(){return M()}),3e4),e=setInterval((function(){return w((new Date).getTime())}),1e3);return function(){clearInterval(t),clearInterval(e)}}),[]),Object(u.jsxs)("div",{children:[Object(u.jsx)(c.a,{small:!0,showTitle:!0,showSubtitle:!0,showButtons:!1,hideOnMobile:!0,hideVote:!0,title:"Steps",subtitle:"Step Detector"}),Object(u.jsxs)("div",{className:"content-container",children:[Object(u.jsx)("div",{className:"top-content-padding shrink-on-mobile"}),Object(u.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"},children:[Object(u.jsxs)("label",{htmlFor:"hours-value",style:{fontSize:"1.2rem",lineHeight:"normal",color:"var(--text)",marginBottom:"0px"},children:["Report Hours:",Object(u.jsx)("input",{id:"hours-value",value:x,onChange:function(t){return g(t.target.value)},style:{marginLeft:"10px",marginRight:"20px",width:"60px",textAlign:"center"}})]}),Object(u.jsx)("button",{onClick:function(){return M()},style:{width:"70px"},children:"Apply"})]}),Object(u.jsxs)(o.a,{title:"Step Detector",children:[Object(u.jsx)("p",{style:{fontSize:"1.5rem",lineHeight:"normal",color:"var(--text)"},children:"The frequency of steps occurring over time."}),Object(u.jsx)(s.a,{data:y&&y.frequency,showActions:!1,trendType:"day",curve:"linear",reportReference:null,marginBottom:0,height:"460px"}),Object(u.jsx)("p",{style:{fontSize:"1.5rem",lineHeight:"normal",color:"var(--text)"},children:"The intensity of steps occurring over time."}),Object(u.jsx)(s.a,{data:y&&y.intensity,showActions:!1,trendType:"day",curve:"linear",reportReference:null,marginBottom:0,height:"460px"}),Object(u.jsx)("p",{style:{fontSize:"1.5rem",lineHeight:"normal",color:"var(--text)"},children:"Most recent activity."}),Object(u.jsxs)("table",{style:{fontSize:"1.2rem"},children:[Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{style:{padding:"5px 20px 5px 0px"},children:"Time"}),Object(u.jsx)("th",{style:{padding:"5px 20px 5px 0px"},children:"Intensity"})]}),r.sort((function(t,e){return new Date(e.datetime).getTime()-new Date(t.datetime).getTime()})).map((function(t,e){var n=Math.round((S-new Date(t.datetime).getTime())/1e3);if(n>300)return null;var i="";if(n<15)i="Just now";else if(n<60)i="".concat(n," seconds ago");else if(n<3600){var r=Math.round(n/60);i="".concat(r," minute").concat(1===r?"":"s"," ago")}else{var a=Math.round(n/3600);i="".concat(a," hour").concat(1===a?"":"s"," ago")}var c="white";return t.intensity<=100?c="white":t.intensity<=200?c="orange":t.intensity<=400?c="#ff4400":t.intensity>400&&(c="red"),Object(u.jsxs)("tr",{style:{color:c},children:[Object(u.jsxs)("td",{style:{padding:"5px 20px 5px 0px"},children:[new Date(t.datetime).toLocaleString()," (",i,")"]}),Object(u.jsx)("td",{style:{padding:"5px 20px 5px 0px"},children:t.intensity})]},e)}))]})]})]})]})}}}]);
//# sourceMappingURL=15.15de3dff.chunk.js.map